<html>
<head>
	<title></title>
	<script src="raphael.js"></script>
	<script src="jquery.js"></script>
</head>
<body style = "background-color: #fff;">

	<script type="text/javascript">
		Raphael.fn.chartDonut = function (x, y, r1, r2, values, colors) {
			var paper = this;
			var animationTime = 100;
			var segmentWidth = r2 - r1; 

			function sector(x, y, r1, r2, startAngle, endAngle, params) {
				var x11 = x + r1 * Math.sin(startAngle);
				var y11 = y - r1 * Math.cos(startAngle);
				var x21 = x + r1 * Math.sin(endAngle);
				var y21 = y - r1 * Math.cos(endAngle);

				var x12 = x + r2 * Math.sin(startAngle);
				var y12 = y - r2 * Math.cos(startAngle);
				var x22 = x + r2 * Math.sin(endAngle);
				var y22 = y - r2 * Math.cos(endAngle);

				var big = 0;
				if (endAngle - startAngle > Math.PI) 
					big = 1;

				var pathList = ["M", x12, y12,
								"A", r2, r2, 0, big, 1, x22, y22,
								"L", x21, y21, 
								"A", r1, r1, 0, big, 0, x11, y11,
								"Z"];

				var c = paper.path(pathList).attr(params);
				return c;
			}

			var total = 0;
			for (var i = 0; i < values.length; i++) {
				total += values[i];
			};

			var angle = 0;

			var process = function(i) {
				var endangle = angle + values[i] / total * Math.PI * 2;
				var p = sector(x, y, r1, r2, angle, endangle, {"fill": colors[i], "stroke": colors[i], "stroke-width": 0});
				var p_shadow = p.glow({opacity: 0.001, width: segmentWidth * 0.6});

				p.mouseover(function () {
					p_shadow.toFront();
					p.toFront();
					p_shadow.stop().animate({"opacity": 0.02}, animationTime);
					p.stop().animate({"stroke-width": segmentWidth * 0.33}, animationTime);
				}).mouseout(function () {
					p_shadow.stop().animate({"opacity": 0}, animationTime);
					p.stop().animate({"stroke-width": 0}, animationTime);
				});
				angle = endangle;
			}

			for (var i = 0; i < values.length; i++) {
				process(i);
			};
		}

		$(function (){
			Raphael("holder", 700, 700).chartDonut(200, 200, 100, 130, [5, 1, 5, 3], ["#ADD7B8", "#88FFC4", "#00E397", "#71C499"]);
		});
	</script>

	<div id="holder"></div>
</body>
</html>